シナリオ作成のためのメモ書き集
==============================

まえがき
--------
シナリオを作りながら苦労したこと、調べたこととかをここにメモしてみんなで共有しよう

現時点でイベントキャラでできないこと(見つけたもののみ)
------------------------------------
* 引継ぎ
* 戦死
* 戦闘の結果捕獲
* 勢力が滅亡してもゲームから退場しないこと
* 能力を見ること
* 主人公にすること
* 料理長

現時点で量産キャラでできないこと(見つけたもののみ)
--------------------------------
* 謀反　謀反チェックでバグる
* 勢力のトップになること
* FINDCHARA(CSTR:99)などを使ったキャラ捜索
* Func@NAME_TO_CHARA(ARGS:0)
* ぶっちゃけCSTR:99は名前が被ると意図する動きをしないからCSTR:99を使う処理全部

キャラ追加手順
--------------
* 一周中で一人だけのイベントキャラを追加したい
    1. CSVを作りましょう
    2. CSVの名前にCSVフォルダから2001~2099の範囲で空いてる番号を探してその数字をつけます
    3. ERB内のシナリオ、イベントなどで登場させる際に@ADD_CHARA_FROM_CSV(CSVNO)を呼び出すとキャラがゲーム中に登場します　キャラ番号はRESULTに入ってます
    4. いろいろ変数を設定します
        + CFLAG:1 このキャラが所属する勢力の番号をしまいます
        + CFLAG:9 ここに勢力の番号入っていた場合登場時点でその勢力に捕虜になっています
        + CFLAG:12 CFLAG:1が0かつCFLAG:9が0の状態でこの変数に1を入れるとこのキャラが放浪し始めます
        + CFLAG:20 ここに他のキャラのIDを入れるとそのキャラがこのキャラの遺伝上の父親になります ただし表示されません
        + CFLAG:21 ここに他のキャラのIDを入れるとそのキャラがこのキャラの母親になります
        + CFLAG:24 ここに他のキャラのIDを入れるとそのキャラがこのキャラの父親と皆に見なされるようになります
        + CFLAG:29 CFLAG:9に勢力の番号が入っている状態でこの変数に1が入っていたらそのキャラは捕虜ではあっても牢屋ではなく部屋に軟禁されるようになります　ただ処理ができてないためあまり意味はないです
        + CFLAG:40 童貞でないキャラはここに童貞を捧げた相手のIDを入れることができます デフォルト値は不明として扱われます
        + CFLAG:40 処女でないキャラはここに処女を捧げた相手のIDを入れることができます デフォルト値は不明として扱われます
* 一周中で複数似たような名前、素質のキャラを追加したい
    1. ERB内で@ADD_VOID_CHARA()を呼び出すとキャラのひな形が用意されてRESULTでキャラ番号が帰ってきます
    2. 絶対に必要なものを設定します NAMEやCALLNAME、また主人公捕虜調教を行わせたい場合はBASEを絶対に設定しましょう
    3. キャラの設定をします 趣味に合わせてTALENT、ABL、EXP、CFLAGを適正にします
    4. 最後に@NEWCHARA_INIT(ARG:0)にキャラ番号を渡して呼びましょう
* コンパチキャラでもCSVで扱いたいわがままな人へ
    1. 2001~2099の範囲でCSVを作る
    2. @ADD_VOID_CHARA()の代わりに@ADD_CHARA_FROM_CSV(CSVNO)を呼び出す
    3. NOにFunc@GET_EMPTY_NO()を代入する
    4. CFLAGを設定します

イベント勢力の作り方
--------------------
1. Func@GET_NEW_COUNTRY()を使って新しい勢力の番号COUNTRYNOを取得する
2. COUNTRY_BOSS:COUNTRYNOに勢力の当主のIDを入れる　IDがわからないキャラはキャラ番号をFunc@GET_ID(ARG)にわたそう
    * 明確な当主というものを出したくないときのTIPS
        + NO = 2000がシナリオ中に一人までそういう用途として使われる慣習があります
        + そのシナリオでほかにそのようなキャラがいない保証があるのならば以下の手法で勢力名だけに使われるキャラを作成できます
            * @ADD_VOID_CHARA()を呼んだ後NOに2000を入れる
            * NAMEとCALLNAME、必要に応じてCSTR:99に名前を入れて他の変数はいじらない
            * @NEWCHARA_INIT(ARG)する
    * 君主は必ずCSTR:99を設定しよう　ほかのキャラとかぶらない名前にしようね
3. COUNTRY_COLOR:COUNTRYNOに勢力の色を設定する
4. COUNTRY_EVENT_ID:COUNTRYNOにその勢力を認識するための番号を割り当てる
    * この番号はその勢力がイベント勢力で有ること、それが何という勢力であるか　というのを調べるために使われる
5. 勢力の都市を設定する
    * ゲーム開始時点の場合
        + CITY_OWNER:GET_CITYNUMBER(ARGS:0)のARGS:0に都市の名前を渡してからこの変数にCOUNTRYNOを入れること
    * ゲームの途中で登場する場合
        + @TAKEOVER_CITY_FROM_NO(ARG:0,ARG:1)や@TAKEOVER_CITY_FROM_NAME(ARGS:0,ARGS:1)をつかって都市を接収すること
6. その他設定
    * @INIT_RELATION(ARGS:0, ARGS:1, ARG:2, ARG:3) ARGS:0勢力からARGS:1勢力に対する好感度をARG:2あげ敵対値をARG:3あげる
    * @INIT_ALLIANCE_BY_NAME(ARGS:0, ARGS:1, ARG:2) ARGS:1とARGS:2勢力の間でARG:2ターンの同盟を結ぶ
    * COUNTRY_IS_CLOSED:COUNTRYNO この変数に1が入っていた場合この勢力とは外交が不可能になる　シナリオ上のボス敵などにどうぞ
    * 勢力に兵力を与える場合
        + 初期からいる勢力の場合
            * 勢力の準備が整い@INIT_ARMYを呼んだ後にCOUNTRY_SOLDIER:COUNTRYNOへ追加の兵数を足して入れること
                + @INIT_ARMYはすべての勢力の準備が整った後に行わないと兵力がいない勢力ができる
                + @INIT_ARMYを呼ぶ前に変数に入れても消える
        + 途中から参戦する勢力の場合
            * 直接COUNTRY_SOLDIER:COUNTRYNOへと入れる
                + ここで数字を入れない場合勢力に最初兵がいないことに注意
