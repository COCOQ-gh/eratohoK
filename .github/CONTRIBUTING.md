# Pull Requestに際して

## 粒度

可能な限りコミットやPull Requestの粒度が小さくなるよう努めてください。
具体的には、単一機能の変更、修正が完了した時点でPull Requestを発行してください。
これはそのPull Requestに含まれる変更を把握しやすくするためです。

## PR用のブランチをどのブランチから生やすか、PR時にどのブランチにマージするか

### 最新タグ以前に含まれていた重大な不具合の修正

エラー落ちする、該当不具合を踏むとセーブデータに異常が生じる、毎ターン同じイベントが発生してゲームにならないなど
masterから生やしてdevelopへ(こちらでhotfixを切り、マージ先をそちらへ切り換えます）

### 最新タグ以前に含まれていた軽度な不具合の修正

表示崩れ、誤字修正など
developから生やしてdevelopへ

### 最新タグ以降に含まれた不具合の修正

Kのレポジトリではタグを打つタイミング=バイナリ配布タイミングであるので、要するに「最新版以降に含まれた不具合」、言い換えると「開発中のバージョンでエンバグされた不具合」です
developから生やしてdevelopへ

### 機能追加、変更

developから生やしてdevelopへ

### 不要な関数やコメントの削除、コメントの追加など

developから生やしてdevelopへ

## コミットメッセージの形式

コミットメッセージを以下のいずれかの形式にしてください。

- (ADD|UPDATE|FIX|MERGE):本文
- 本文のみ

### (ADD|UPDATE|FIX|MERGE):本文

これらの接頭辞をもつコミットは、changeLogに記述されます。

- ADD 新しい要素を追加した場合に利用します。複数コミットに跨がる場合、最も代表的なものをこの形式にします。
- UPDATE 最新のタグ以前のコードに含まれていた要素を変更したときに利用します。
- FIX 最新のタグ以前のコードに含まれていた不具合を修正したときに利用します。
- MERGE パッチをマージした際に利用します。おそらくPull Request時に利用されることはないでしょう。

どの要素や不具合がどのタイミングから含まれていたのか確認する場合は、`git blame`などをご利用ください。

#### 利用例

- 新しいコマンドを追加した。
- 最新のタグが1.3.2であるときに、1.3.0の時点で含まれていた関数の挙動を変更した。
- 最新のタグが1.2.5であるときに、1.2.3の時点で含まれていた不具合を修正した。

### 本文のみ

何かしら「変更や修正はしたけれども、changeLogに記載する必要はない」コミットはこちらの形式です。
以下のようなときに利用します。

- 新しい要素の追加作業に付随するコミット
- 最新のタグ以降のコードに含まれている要素を変更したとき
- 最新のタグ以降のコードに含まれている不具合を修正したとき

#### 利用例

- 新機能を追加するブランチにおいて、関数を別ファイルに移動した。
- 新イベントを追加するブランチにおいて、そのために必要な定数を宣言した。
- 最新のタグが1.3.2であるときに、1.3.2タグが振られているコミット以降に追加された関数を変更した。
- 最新のタグが1.8.1であるときに、1.8.1タグが振られているコミット以降に混入した不具合を修正した。
