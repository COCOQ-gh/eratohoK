★eratohoK ver0.122用 離反処理改善等パッチ

★★概要（だったもの）
・離反時の引抜き処理をちょっと見やすくしたよ
・離反人数が最終的に0人にならないようにしておいたよ
・配列シャッフル関数がちょっと間違っていたので直したよ
・無所属都市の一部が兵数0人なのを修正したよ
・ごめん、それだけで済まなかったんだよ……

★★パッチ内容
・SORT.ERB
　ソートアルゴリズムがおかしかったので修正
　配列の最後は常に最大値が入っていました
　配列の最後に-1を入れておく。フェイルセーフ的なものです

・SLG_TURNEND.ERB
　アルゴリズムの修正に伴い正しくシャッフルするように修正

・SCENARIO1.ERB
　無所属都市の一部が兵数0になっていたのを修正
　離反時に奪われる都市がなるべく隣接するように。その結果離反元が分断されても仕方ありません。
　離反元勢力の人数計算を簡略化。同じ処理をまとめるのがコツです。
　離反における引抜き人数の計算式を修正。各タイプの候補が一人以上入れば必ず一人は抜いていきます
　引き止め失敗時、離反者は怒って拉致する人数を増やします。
　デバッグ用に一部にDEBUGPRINTFORMLを設置、本当にふんわりしたものですが。
　離反処理部の半数近くがコメントになっているのはだいたいこのパッチ作者のせいです（各処理に自分が把握するために補足を付けたくなる）

・SCINARIO2.ERB
　こちらも無所属都市の一部が兵数0になっていたのを修正

・SLG_AI.ERB
　件の手詰まりの原因が「中継点で移動目標を失った場合解体されず残ったままになる」のため、AIの行動開始時に行われる解隊処理の解隊条件に「現在地が中継点で移動先を見失った部隊」も追加


★★パッチ導入方法
各ファイルを本体に上書きしてください。
SLG_AI.ERBを触っているため、AI強化パッチの内容が含まれています。
動作確認（及びパッチ作成）環境：eratohoK ver0.122用〜AI強化パッチまで全部入り


★★その他
AI関係は仕様書を書きだしてます。
ざっくり言えば思考パターン用の配列（「AI_PATTERN:タイプ:項目」みたいなの）を作って状況毎に参照して処理させるような感じを想定しています。
あくまでもこちらが勝手に書きだしたところでしかないので、より面白そうなものが作られればそちらに乗る方針です。

AIはイベントには多分間に合いません。

パッチが仕上がってアップしてからテスト忘れていたの思い出し即削除しました、ごめんなさい。
おかげでテストしたらあらがいろいろ出てきて修正するはめになりました（DEBUGPRINTFORMLはその名残です）
あと、気になったのを触り続けてるとこんな


★★作成パッチリスト
eratohoK0110_スキマ埋めパッチ
eratohoK ver0.116用反乱フラグ関数＆二人が一緒に反乱パッチ
eratohoK ver0.116用行動順等乱数化＆反乱フラグ修正パッチ
eratohoK ver0.120用各種修正＆調整パッチ
eratohoK ver0.120用君主は謀反しないでくださいパッチ
eratohoK ver.0.120用 処理高速化パッチ
eratohoK ver0.122用 離反処理改善等パッチ＜今回のパッチはこちらです
