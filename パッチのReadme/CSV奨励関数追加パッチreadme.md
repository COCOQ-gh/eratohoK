eratohoK+パッチまとめ+バグ修正パッチ1018用シナリオキャラ追加奨励関数追加パッチ
==============================================================================

概要
----
* 最近eratohoKでシナリオでキャラを追加することが流行ってるっぽいから処理の一部を関数化して手を動かす量を減らす　まあ、どうせコピペだろうけど
* とにかく、シナリオやイベントでのキャラの追加のために書き込む内容が減ります


パッチ内容解説
--------------
* @ADD_CHARA_FROM_CSV(CSVNO)、@ADD_VOID_CHARA(ARG:0 = 0)などイベント、シナリオでキャラを追加する際の処理をひとまとめにした関数を追加
    + これによりキャラの追加が簡便になりまたCSVで管理することが容易になる　はず
* それに伴う関連処理を置き換え
* 調べていてわかった、あるいは最近調べていたキャラ追加に役に立つであろうドキュメントをreadmeに簡単に挿入　以下ドキュメント

eratohoKにおけるCSVキャラ番号(NO)の決め方参考資料
-------------------------------------------------
- **注意 バリアント主は新しいCSVの追加に対して何らかの考えを持っているようなので実際に追加する場合は確認をすること**
- **このドキュメントはERB内で読み読み取れたこと、あるいは追加した関数についてのドキュメントでありバリアント主の意向を示すものではないことに留意**
- 東方キャラであり最初からゲームに出てくる
    + 0~200の範囲で番号を割り振りCSVを作り入れること
    + 自動で読み込みゲームに参加する　ただし、勢力への所属はシナリオごとに設定
    + 自動で周回プレイ時引き継がれる
- 特定のシナリオ特有のキャラクター　あるいはイベントのみで登場するキャラクター
    + その周回以外出てほしくない
        * 同じようなデータを持った同じような名前のキャラが複数人登場し得る　同じひな形から複数のキャラを生成することがあり得る
            + CSVを使ってはいけない
            + ERB内で@ADD_VOID_CHARA()を呼んだ後返り値のキャラに設定をして@NEWCHARA_INIT(ARG:0)を呼ぶこと
            + あるいは、CSVを用意してからNOを書き換える手段も一応できるけど誤解を招きやすいからバリアント主に聞こう
        * 同じデータ、同じ名前を持ったキャラが存在しない
            + 必要になった時に2000~2100の範囲でCSVを作成し@ADD_CHARA_FROM_CSV(CSVNO)を呼ぶとキャラが生成される
            + 他者とのCSV番号かぶりに注意
    + 周回時引き継ぎたい
        * 今のところそのようなキャラもないしチェックも住んでないから非推奨
        * 同じようなデータを持った同じような名前のキャラが複数人登場し得る
            + CSVを使ってはいけない
            + ERB内で@ADD_VOID_CHARA(1)を呼んだ後返り値のキャラに設定をして@NEWCHARA_INIT(ARG:0)を呼ぶこと
        * 同じデータ、同じ名前を持ったキャラが存在しない
            + 必要になった時に1000~1100の範囲でCSVを作成しADD_CHARA_FROM_CSV(CSVNO)を呼ぶとキャラが生成される
            + 他者とのCSV番号かぶりに注意
- 子供やランダムキャラをいろいろしたい
    + R_CHARAフォルダの中で作成しているためその中をいじくること
- 詳細
    * 0~200 固有キャラ
        + ゲーム開始時に必ずロードされ参加するキャラ
        + 原作キャラのみが存在することが望まれるだろう
        + 周回で状態が必ず持ち越される
    * 201~400 ランダムキャラ
        + オプションで選択された場合ゲーム中でランダムに生成され順にこの範囲の番号が順に割り当てられ各勢力に仕官する
        + この数字をCSVで使ってはいけない
        + 引継ぎ処理で明示的に引き継がない限り周回では持ち越されない
    * 400~999 子供
        + 子供が生まれた際この範囲の番号が順に与えられる
        + この範囲の数字もCSVで作ってはいけない
    * 1000~1999
        + この範囲のキャラは最初のロードでは読み込まれず、シナリオ、イベントなどで生成されるキャラである
        + 引き継ぐことができる
        + 1000~1100と1100~1999まではそれぞれ下の項目と引き継がれる以外おなじためもし作りたくなったら詳細意外や下の項目を見ながら設定すること
    * 2000
        + 扱い的には一つ下と変わらないのだが、特殊な処理に使われるためCSVを作成するべきではない
        + 交渉不可能なシナリオエネミーの当主がこの番号を持っている場合が多い
    * 2001~2099 CSVからロードされる引継ぎ不可能シナリオキャラ
        + 固有キャラと違って自動でロードされないキャラ
        + 引き継がれない
        + ゲーム内に登場させるときは@ADD_CHARA_FROM_CSV(CSVNO)を使って呼び出し必要に応じてCFLAGなどをゲーム内の状況に合わせて設定すること
        + **CSVを作成するときは他のシナリオでも使う可能性が一応あり得ることには留意すること**
    * 2100~ CSVからロードされない量産型引継ぎ不可能シナリオキャラ
        + 固有キャラと違って自動でロードされないキャラ
        + 引き継がれない
        + この範囲にCSVを基本作ってはいけない
        + ゲーム内に登場させるときの手順
            - @ADD_VOID_CHARA()を呼ぶ
            - 返り値で用意された空のキャラの番号が返されるのでその番号を用いキャラの設定を行う
            - 設定が終わったら@NEWCHARA_INIT(ARG:0)へキャラの番号を渡す **絶対にこの関数を呼ぶこと**
- その他問題点
    * 2000以降の番号を持ったキャラは所属勢力が滅亡した際削除される降伏させたさいは消えない
    * 交渉ができない敵勢力専用として使う分にはいいがそうでない場合滅亡と降伏で動作が違うのが気になる　非想天則なら攻められたから壊れたでもいいが

シナリオでの勢力追加にちょっとしたtips
--------------------------------------
+ ADDVIDCHARAを利用しシナリオ1人までNO=2000の番号を持ったキャラを自由にシナリオエネミーの当主などに使うことができる
    * @ADD_VOID_CHARA()ではないことに注意

パッチ内容詳細
--------------
* CSV/
    + Chara/
        - Add Chara2003 非想天則.CSV
            * 見やすくするためにCSV化 番号はあんま気にしないで
* ERB/
    + SLG/
        - SCENARIO/
            * SCENARIO1.ERB
                + @ADD_GAIRAI_SOLDIER(ARG:0)
                    * 外来人の追加処理
                    * さっそく@ADD_VOID_CHARA()で置き換え
            * SCENARIO2.ERB
                + @ADD_GOBLIN_SOLDIER(ARG:0)
                    * ゴブリンの上と同じ
            * SCENARIO6.ERB
                + @SCENARIO_6
                    * 赤ちゆりを修正
    + SYSTEM/
        - NEWGAME.ERB
            * @INITIALIZE
                + ニューゲーム時の初期化処理
                + キャラの召喚を@ADD_CHARA_FROM_CSV(CSVNO)に差し替え
            * @BANDIT_INIT(ARG:0)
                + 野盗の召喚処理
                + @ADD_VOID_CHARA()
        - _FUNCTION.ERB
            * Add @ADD_CHARA_FROM_CSV(CSVNO)
                + キャラをCSVから追加する処理をひとまとめにしたもの
                + 返り値としてCFLAGなどで使えるキャラの番号を返す
            * Add Func@GET_EMPTY_NO(ARG:0 = 0)
                + CSVNOの中で引数で与えた条件に合った範囲で空いている番号を返す
                + ARG:0 引継ぎ可能であるかフラグ
                    * 1 引継ぎできる
                    * else 引継ぎできない
            * Add @ADD_VOID_CHARA(ARG:0 = 0)
                + 空のキャラを作成し適切なNOを与えてからキャラの番号を返す関数
                + ARG:0 引継ぎ可能であるかフラグ
                    * 1 引継ぎできる
                    * else 引継ぎできない
