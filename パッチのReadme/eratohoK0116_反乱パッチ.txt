‡eratohoK ver0.116用反乱フラグ関数＆二人が一緒に反乱パッチ


‡‡みんなで裏切れば怖くないっ！
というわけで汎用の反乱フラグチェック的なものを作ってみた。
REBELLION_FLAG(ARGS:0 , ARG:1 = 5 , ARG:2 , ARG:3 = 100)
キャラ名が(ARGS:0)のキャラに対して反乱するかどうかをチェックする関数です
・キャラ名判別用のCSTR:99でサーチ
・(ARG:1)期以降か判定
・プレイヤーが使用していないか確認
・無所属でも捕虜状態でも放浪中でも幻想郷から排除されてもいない（よく考えたら既に死んでるキャラいるやん）か判別する
・所属している勢力が(ARG:2)都市以上を支配しているか調べる
・条件を満たしたら即謀反もどうかと思うので、100未満の乱数を取って結果が（ARG:3）以下なら決行する

＊決行時は1を、非決行時は0を返します。
＊CSTR:99が存在しない汎用キャラには使えません、残念っ！

例：シナリオ1のぬえであればREBELLION_FLAG("ぬえ", 30 , 5 , 100)で以下の設定となります
・30期以降
・所属勢力の支配都市数が5以上
・決行率は100％＝確実に反乱します
ここに追加で二項演算子で色々判定させると良いわけです

ついでに反乱決行済フラグをキャラ別にビットを割り当てることで、なんとぬえと正邪が別々に反乱するようになりました。
つまり、反乱した勢力からさらに反乱もあり得るというある意味世も末な世界の始まりです

これで他のキャラの反乱も起こしやすくなるんじゃないかな？
あと汎用謀反イベントとか（ぼそ）

‡‡楽しい反乱世界への扉の開け方
eratohoK正邪離反その他パッチ導入後このパッチのファイルを上書きしてください。


‡‡やりたいこと
キャラ番号を格納した配列を用意してシャッフルしてランダム順にチェックできるようになれば、もっとカオスになると思うんだ。
具体的にはキャラの並び順関係なしにランダム抽出したり、勢力の行動順を入れ替えたりといった具合に。
構想はあるけど今回はここまで。

イベントどうしよう……

