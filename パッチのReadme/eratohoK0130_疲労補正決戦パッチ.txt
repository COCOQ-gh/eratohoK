★eratohoK ver0.130用 疲労補正調整＋決戦処理変更パッチ

★★概要
いつものポカ修正＋アルファです
・片方の疲労補正により双方の計略発動率が変化するのを修正（ちょっと固定値の存在を失念してました）
・最終決戦パッチが面白い使い方できそうなので改造


★★パッチ内容
・SLG_AI.ERB
　最終決戦フラグをビットチェック（GETBIT(FLAG:101, ARG:0=勢力番号)）に差し替え
　勢力ごとにフラグを持っているかをチェックして持っている場合解隊処理を飛ばします

・SLG_TURNEND.ERB
　疲労による補正に応じて計略発動判定の定数を変更
　計略発動判定時に補正をかけた値を参照するように
　差異は微々たるものだとは思いますが、別の問題も起こりそうなので先に塞いでおきます

・SCENARIO6.ERB
　最終決戦フラグをビット処理で行うように
　ついでにフラグを折る処理を簡略化（怪しい関数を見つけたので試したかっただけともいう）

★★★最終決戦フラグの変更点と使い方
　使用フラグはFLAG:101と変わらないですが、勢力番号とビット位置を対応させて動作するようにしています
・フラグの確認
　GETBIT(FLAG:101, <勢力番号>) で確認できます
　ビット値 0:決戦モードではない, 1:決戦モード、解隊処理を飛ばします

・フラグを立てる
　SETBIT FLAG:101, <勢力番号> で該当する勢力に決戦フラグを立てます（=1にする）

・フラグを折る
　CLEARBIT FLAG:101 <勢力番号> で該当する勢力の決戦フラグをおります（=0にする）

・応用編
　例えばイベントで「野盗がどこかの中継点を占拠した」を起こす場合、
　対象となる中継点に新勢力の部隊を1つ置いてこのフラグを立てるとそこに居座り続けます
　通りがかった放浪中の旅人が野盗に捕まって陵辱されてもおかしくありませんね？

　もしくは共に主人公の所属していない勢力が複数ある段階でも、
　特定の勢力だけ決戦モードで立てこもるなんてことが可能になります
　同盟国へのワープができなくなれば、立てこもり状態の部隊が壊滅する前に助けに行く、なんてイベントも可能になります
　（外交不可状態で独立させれば擬似的には可能にでしょうけど、合流する辺りで一戦やりそうなのが怖い所）

こういう感じで夢を広げてみました（あとは任せた）


★★おまけ
なんかFOR文で特定の値を持つキャラを探す処理が多いのでまとめてFINDELEMENTに書き換えたくなっている今日このごろ
ただし、それでどれくらい処理が早くなるかはシステム処理に詳しくないのでよくわからないです（ぉ

その前に自分が触った部分の不具合のメンテナンスが先決ではありますが
とりあえずAIも触りたいと思っています（仕様書書ける程度には読みたい）


★パッチ履歴
eratohoK0110_スキマ埋めパッチ
eratohoK ver0.116用反乱フラグ関数＆二人が一緒に反乱パッチ
eratohoK ver0.116用行動順等乱数化＆反乱フラグ修正パッチ
eratohoK ver0.120用各種修正＆調整パッチ
eratohoK ver0.120用君主は謀反しないでくださいパッチ
eratohoK ver.0.120用 処理高速化パッチ
eratohoK ver0.122用 離反処理改善等パッチ
eratohoK 0.127用 バランス崩ｋ…調整パッチ
eratohoK ver0.129用 補正追加処理修正パッチ
eratohoK Ver0.129用 反乱関係修正パッチ
eratohoK ver0.129用 反乱軍蜂起都市選択関数＆反乱フラグ関数拡張パッチ
eratohoK ver0.130用 疲労補正調整＋決戦処理変更パッチ＜ぜかまし


