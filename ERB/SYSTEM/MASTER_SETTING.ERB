;-------------------------------------------------
;キャラARG:0にARG:1番目の主人公データを適用
;-------------------------------------------------
@APPLY_MASTER_DATA(ARG:0, ARG:1)
;基本名(NAME)
NAME:(ARG:0) = %MASTER_NAME:(ARG:1):0%
;呼び名(CALLNAME)（旧真名）
CALLNAME:(ARG:0) = %MASTER_NAME:(ARG:1):1%
;姓
CSTR:(ARG:0):0 = %MASTER_NAME:(ARG:1):2%
;名
CSTR:(ARG:0):1 = %MASTER_NAME:(ARG:1):3%
;字
CSTR:(ARG:0):2 = %MASTER_NAME:(ARG:1):4%
;基本名(NAME)のフリガナ
CSTR:(ARG:0):3 = %MASTER_NAME:(ARG:1):5%
;呼び名(CALLNAME)のフリガナ
CSTR:(ARG:0):4 = %MASTER_NAME:(ARG:1):6%
;姓のフリガナ
CSTR:(ARG:0):5 = %MASTER_NAME:(ARG:1):7%
;名のフリガナ
CSTR:(ARG:0):6 = %MASTER_NAME:(ARG:1):8%
;字のフリガナ
CSTR:(ARG:0):7 = %MASTER_NAME:(ARG:1):9%
;愛称
CSTR:(ARG:0):98 = %MASTER_NAME:(ARG:1):10%
FOR LOCAL:0, 0, 100
	MAXBASE:(ARG:0):(LOCAL:0) = MASTER_MAXBASE:(ARG:1):(LOCAL:0)
	ABL:(ARG:0):(LOCAL:0) = MASTER_ABL:(ARG:1):(LOCAL:0)
	EXP:(ARG:0):(LOCAL:0) = MASTER_EXP:(ARG:1):(LOCAL:0)
NEXT
FOR LOCAL:0, 0, 1000
	TALENT:(ARG:0):(LOCAL:0) = MASTER_TALENT:(ARG:1):(LOCAL:0)
NEXT

;-------------------------------------------------
;キャラARG:0番目の主人公データを削除
;-------------------------------------------------
@DELETE_MASTER(ARG:0)
;主人公データを前に１つ詰める
FOR LOCAL:1, ARG:0, 29
	FOR LOCAL:0, 0, 100
		MASTER_MAXBASE:(LOCAL:1):(LOCAL:0) = MASTER_MAXBASE:(LOCAL:1 + 1):(LOCAL:0)
		MASTER_ABL:(LOCAL:1):(LOCAL:0) = MASTER_ABL:(LOCAL:1 + 1):(LOCAL:0)
		MASTER_EXP:(LOCAL:1):(LOCAL:0) = MASTER_EXP:(LOCAL:1 + 1):(LOCAL:0)
	NEXT
	FOR LOCAL:0, 0, 1000
		MASTER_TALENT:(LOCAL:1):(LOCAL:0) = MASTER_TALENT:(LOCAL:1 + 1):(LOCAL:0)
	NEXT
	FOR LOCAL:0, 0, 10
		MASTER_NAME:(LOCAL:1):(LOCAL:0) = %MASTER_NAME:(LOCAL:1 + 1):(LOCAL:0)%
	NEXT
	MASTER_NAMETYPE:(LOCAL:1) = MASTER_NAMETYPE:(LOCAL:1 + 1)
NEXT

FOR LOCAL:0, 0, 100
	MASTER_MAXBASE:29:(LOCAL:0) = 0
	MASTER_ABL:29:(LOCAL:0) = 0
	MASTER_EXP:29:(LOCAL:0) = 0
NEXT
FOR LOCAL:0, 0, 1000
	MASTER_TALENT:29:(LOCAL:0) = 0
NEXT
FOR LOCAL:0, 0, 10
	MASTER_NAME:29:(LOCAL:0) = 
NEXT
MASTER_NAMETYPE:29 = 0

;-------------------------------------------------
;配列のARG:0番目に主人公を新規作成 ARG:1に1を設定すると修正モード
;-------------------------------------------------
@CREATE_MASTER(ARG:0, ARG:1 = 0)
;名前の一時設定
#DIMS TMP_NAME, 30
#DIM FIRST_LINE
VARSET TMP_NAME, ""

LOCAL:20 = 0

;修正の場合
IF ARG:1
	IF MASTER_NAMETYPE:(ARG:0) == 0
		TMP_NAME:0 = %MASTER_NAME:(ARG:0):0%
		TMP_NAME:1 = %MASTER_NAME:(ARG:0):10%
	ELSEIF MASTER_NAMETYPE:(ARG:0) == 1
		TMP_NAME:10 = %MASTER_NAME:(ARG:0):1%
		TMP_NAME:11 = %MASTER_NAME:(ARG:0):2%
		TMP_NAME:12 = %MASTER_NAME:(ARG:0):3%
		TMP_NAME:13 = %MASTER_NAME:(ARG:0):4%
		TMP_NAME:14 = %MASTER_NAME:(ARG:0):6%
		TMP_NAME:15 = %MASTER_NAME:(ARG:0):7%
		TMP_NAME:16 = %MASTER_NAME:(ARG:0):8%
		TMP_NAME:17 = %MASTER_NAME:(ARG:0):9%
		TMP_NAME:18 = %MASTER_NAME:(ARG:0):10%
	ELSE
		TMP_NAME:20 = %MASTER_NAME:(ARG:0):2%
		TMP_NAME:21 = %MASTER_NAME:(ARG:0):3%
		TMP_NAME:22 = %MASTER_NAME:(ARG:0):7%
		TMP_NAME:23 = %MASTER_NAME:(ARG:0):8%
		TMP_NAME:24 = %MASTER_NAME:(ARG:0):10%
	ENDIF
	LOCAL:20 = MASTER_NAMETYPE:(ARG:0)

;新規作成の場合
ELSE
	;デフォルト能力の設定
	MASTER_MAXBASE:(ARG:0):0 = 2000
	MASTER_MAXBASE:(ARG:0):1 = 1500
	MASTER_MAXBASE:(ARG:0):2 = 2500

	MASTER_TALENT:(ARG:0):0 = 0
	MASTER_TALENT:(ARG:0):1 = 1
	MASTER_TALENT:(ARG:0):2 = 1
	MASTER_TALENT:(ARG:0):3 = 1
	MASTER_TALENT:(ARG:0):4 = 1
	MASTER_TALENT:(ARG:0):200 = 1
	MASTER_TALENT:(ARG:0):300 = 0
	MASTER_TALENT:(ARG:0):GETNUM(TALENT, "陰毛現在値") = 陰毛_標準
	MASTER_TALENT:(ARG:0):GETNUM(TALENT, "陰毛目標値") = 陰毛_標準
	MASTER_TALENT:(ARG:0):GETNUM(TALENT, "Ｖ締まり") = GET_DEFAULT_TIGHTNESS("普通")
	MASTER_TALENT:(ARG:0):GETNUM(TALENT, "Ａ締まり") = GET_DEFAULT_TIGHTNESS("普通")
	MASTER_ABL:(ARG:0):14 = 5
	MASTER_ABL:(ARG:0):50 = 60
	MASTER_ABL:(ARG:0):51 = 60
	MASTER_ABL:(ARG:0):52 = 60
	MASTER_ABL:(ARG:0):60 = 25
	MASTER_ABL:(ARG:0):61 = 25

	TMP_NAME:0 = あなた
ENDIF

$SHOW_LOOP1

DRAWLINE
PRINTFORML ★★主人公キャラの素質・能力を設定して下さい★★
DRAWLINE
FIRST_LINE = LINECOUNT
$SHOW_LOOP2

;妖術が1以上なら<妖術知識>を付与
MASTER_TALENT:(ARG:0):201 = MASTER_ABL:(ARG:0):53 >= 1

PRINT   名前の入力方式:
CALL PRINT_SELECT_BUTTON(@" 0\{カナ名・特殊名\}", 0, LOCAL:20 == 0)
CALL PRINT_SELECT_BUTTON(@" 1\{中国名\}", 1, LOCAL:20 == 1)
CALL PRINT_SELECT_BUTTON(@" 2\{日本名\}", 2, LOCAL:20 == 2)
PRINTL 

IF LOCAL:20 == 0
	PRINTL 
	PRINTL 
	PRINTL 
	PRINTFORM     呼称 -- %TMP_NAME:0, 14, LEFT%
	PRINTBUTTON " 10[入力]", 10
	PRINTBUTTON " 11[カナ名ランダム]", 11
	PRINTBUTTON " 100[消去]", 100
	PRINTL 
	PRINTFORM     愛称 -- %TMP_NAME:1, 14, LEFT%
	PRINTBUTTON " 12[入力]", 12
	PRINTBUTTON " 101[消去]", 101
	PRINTL 
ELSEIF LOCAL:20 == 1
	PRINTL 
	PRINTFORM       姓 -- %TMP_NAME:11, 10, LEFT%%TMP_NAME:15, 14, LEFT%
	PRINTBUTTON " 12[入力]", 12
	PRINTBUTTON " 13[ランダム]", 13
	PRINTBUTTON " 101[消去]", 101
	PRINTL 
	PRINTFORM       名 -- %TMP_NAME:12, 10, LEFT%%TMP_NAME:16, 14, LEFT%
	PRINTBUTTON " 14[入力]", 14
	PRINTBUTTON " 15[ランダム]", 15
	PRINTBUTTON " 102[消去]", 102
	PRINTL 
	PRINTFORM       字 -- %TMP_NAME:13, 10, LEFT%%TMP_NAME:17, 14, LEFT%
	PRINTBUTTON " 16[入力]", 16
	PRINTBUTTON " 17[ランダム]", 17
	PRINTBUTTON " 103[消去]", 103
	PRINTL 
	PRINTFORM     愛称 -- %TMP_NAME:18, 14, LEFT%
	PRINTBUTTON " 18[入力]", 18 
	PRINTBUTTON " 104[消去]", 104
	PRINTL
ELSEIF LOCAL:20 == 2
	PRINTL 
	PRINTL 
	PRINTFORM       姓 -- %TMP_NAME:20, 10, LEFT%%TMP_NAME:22, 14, LEFT%
	PRINTBUTTON " 10[入力]", 10
	PRINTBUTTON " 100[消去]", 100
	PRINTL 
	PRINTFORM       名 -- %TMP_NAME:21, 10, LEFT%%TMP_NAME:23, 14, LEFT%
	PRINTBUTTON " 12[入力]", 12
	PRINTBUTTON " 101[消去]", 101
	PRINTL 
	PRINTFORM     愛称 -- %TMP_NAME:24, 14, LEFT%
	PRINTBUTTON " 13[入力]", 13
	PRINTBUTTON " 102[消去]", 102
	PRINTL
ENDIF
DRAWLINE

PRINT     性別 -- 
CALL PRINTBUTTON_EX("20{  男性} ", 20, 1, MASTER_TALENT:(ARG:0):0 == 0)
CALL PRINTBUTTON_EX("21{  女性} ", 21, 1, MASTER_TALENT:(ARG:0):0 == 1)
CALL PRINTBUTTON_EX("22{  女双} ", 22, 1, MASTER_TALENT:(ARG:0):0 == 2)
CALL PRINTBUTTON_EX("23{  男双} ", 23, 1, MASTER_TALENT:(ARG:0):0 == 3)
CALL PRINTBUTTON_EX("24{男の娘} ", 24, 1, MASTER_TALENT:(ARG:0):0 == 4)
CALL PRINTBUTTON_EX("25{男の娘双} ", 25, 1, MASTER_TALENT:(ARG:0):0 == 5)
PRINTL 

PRINT キス経験 -- 
CALL PRINTBUTTON_EX("30{  なし} ", 30, 1, MASTER_TALENT:(ARG:0):3)
CALL PRINTBUTTON_EX("31{  あり} ", 31, 1, !MASTER_TALENT:(ARG:0):3)
PRINTL 

PRINT 性経験♂ -- 
CALL PRINTBUTTON_EX("40{  童貞} ", 40, 1, MASTER_TALENT:(ARG:0):2)
CALL PRINTBUTTON_EX("41{非童貞} ", 41, 1, !MASTER_TALENT:(ARG:0):2)
PRINTL 

PRINT 性経験♀ -- 
CALL PRINTBUTTON_EX("50{  処女} ", 50, 1, MASTER_TALENT:(ARG:0):1)
CALL PRINTBUTTON_EX("51{非処女} ", 51, 1, !MASTER_TALENT:(ARG:0):1)
PRINTL 

PRINT   バスト -- 
LOCAL:0 = MASTER_TALENT:(ARG:0):140 || MASTER_TALENT:(ARG:0):141 || MASTER_TALENT:(ARG:0):142 || MASTER_TALENT:(ARG:0):143
CALL PRINTBUTTON_EX("60{  絶壁} ", 60, 1, MASTER_TALENT:(ARG:0):140)
CALL PRINTBUTTON_EX("61{  貧乳} ", 61, 1, MASTER_TALENT:(ARG:0):141)
CALL PRINTBUTTON_EX("62{  並乳} ", 62, 1, !LOCAL:0)
CALL PRINTBUTTON_EX("63{  巨乳} ", 63, 1, MASTER_TALENT:(ARG:0):142)
CALL PRINTBUTTON_EX("64{  爆乳} ", 64, 1, MASTER_TALENT:(ARG:0):143)
PRINTL 

PRINT 天の御遣い- 
CALL PRINTBUTTON_EX("70{  あり} ", 70, 1, MASTER_TALENT:(ARG:0):200)
CALL PRINTBUTTON_EX("71{  なし} ", 71, 1, !MASTER_TALENT:(ARG:0):200)
PRINTL 

PRINTL   ※童貞・処女・バストは性別によって非表示。特殊なアイテムで性別変更した場合などに反映

DRAWLINE
PRINTFORML ※武闘・知略・政治はそれぞれ52、歌唱と料理は27程度が全キャラの平均です
PRINTFORM 武闘:{MASTER_ABL:(ARG:0):50, 3} -- 
PRINTBUTTON "[ +1]", 200
PRINTBUTTON "[ -1]", 201
PRINTBUTTON "[+10]", 202
PRINTBUTTON "[-10]", 203
PRINT   
PRINTBUTTON "80[直接入力]", 80
PRINTL 
PRINTFORM 知略:{MASTER_ABL:(ARG:0):51, 3} -- 
PRINTBUTTON "[ +1]", 210
PRINTBUTTON "[ -1]", 211
PRINTBUTTON "[+10]", 212
PRINTBUTTON "[-10]", 213
PRINT   
PRINTBUTTON "81[直接入力]", 81
PRINTL 
PRINTFORM 政治:{MASTER_ABL:(ARG:0):52, 3} -- 
PRINTBUTTON "[ +1]", 220
PRINTBUTTON "[ -1]", 221
PRINTBUTTON "[+10]", 222
PRINTBUTTON "[-10]", 223
PRINT   
PRINTBUTTON "82[直接入力]", 82
PRINTL 
PRINTFORM 妖術:{MASTER_ABL:(ARG:0):53, 3} -- 
PRINTBUTTON "[ +1]", 230
PRINTBUTTON "[ -1]", 231
PRINTBUTTON "[+10]", 232
PRINTBUTTON "[-10]", 233
PRINT   
PRINTBUTTON "83[直接入力]", 83
PRINT  ※1以上に設定すると素質<妖術知識>が付与
PRINTL 
PRINTFORM 歌唱:{MASTER_ABL:(ARG:0):60, 3} -- 
PRINTBUTTON "[ +1]", 240
PRINTBUTTON "[ -1]", 241
PRINTBUTTON "[+10]", 242
PRINTBUTTON "[-10]", 243
PRINT   
PRINTBUTTON "84[直接入力]", 84
PRINTL 
PRINTFORM 料理:{MASTER_ABL:(ARG:0):61, 3} -- 
PRINTBUTTON "[ +1]", 250
PRINTBUTTON "[ -1]", 251
PRINTBUTTON "[+10]", 252
PRINTBUTTON "[-10]", 253
PRINT   
PRINTBUTTON "85[直接入力]", 85
PRINTL 
DRAWLINE
PRINTBUTTON "  90[詳細設定]", 90
PRINTL 
DRAWLINE
PRINTBUTTON "  91[情報確認]", 91
PRINTL 
PRINTBUTTON "  99[    登録]", 99
PRINT                     
PRINTBUTTON "  95[キャンセル]", 95

;名前の調整
FOR LOCAL:0, 0, 10
	MASTER_NAME:(ARG:0):(LOCAL:0) = 
NEXT
IF LOCAL:20 == 0
	MASTER_NAME:(ARG:0):0 = %TMP_NAME:0%
	MASTER_NAME:(ARG:0):1 = %TMP_NAME:0%
	MASTER_NAME:(ARG:0):10 = %TMP_NAME:1%
ELSEIF LOCAL:20 == 1
	MASTER_NAME:(ARG:0):0 = %TMP_NAME:11%%TMP_NAME:12%
	;真名が無くなったので暫定的にCALLNAMEは「字」を使います
	MASTER_NAME:(ARG:0):1 = %TMP_NAME:13%
	MASTER_NAME:(ARG:0):2 = %TMP_NAME:11%
	MASTER_NAME:(ARG:0):3 = %TMP_NAME:12%
	MASTER_NAME:(ARG:0):4 = %TMP_NAME:13%
	MASTER_NAME:(ARG:0):5 = %TMP_NAME:15%%TMP_NAME:16%
	;真名が無くなったので暫定的にCALLNAMEは「字」を使います（こちらはフリガナ）
	MASTER_NAME:(ARG:0):6 = %TMP_NAME:17%
	MASTER_NAME:(ARG:0):7 = %TMP_NAME:15%
	MASTER_NAME:(ARG:0):8 = %TMP_NAME:16%
	MASTER_NAME:(ARG:0):9 = %TMP_NAME:17%
	MASTER_NAME:(ARG:0):10 = %TMP_NAME:18%
ELSEIF LOCAL:20 == 2
	;日本人名のNAMEはNPCに合わせて「名」を使います
	MASTER_NAME:(ARG:0):0 = %TMP_NAME:21%
	;日本人名のCALLNAMEはNPCに合わせて「名」を使います
	MASTER_NAME:(ARG:0):1 = %TMP_NAME:21%
	MASTER_NAME:(ARG:0):2 = %TMP_NAME:20%
	MASTER_NAME:(ARG:0):3 = %TMP_NAME:21%
	;日本人名のNAMEはNPCに合わせて「名」を使います（こちらはフリガナ）
	MASTER_NAME:(ARG:0):5 = %TMP_NAME:23%
	;日本人名のCALLNAMEはNPCに合わせて「名」を使います（こちらはフリガナ）
	MASTER_NAME:(ARG:0):6 = %TMP_NAME:23%
	MASTER_NAME:(ARG:0):7 = %TMP_NAME:22%
	MASTER_NAME:(ARG:0):8 = %TMP_NAME:23%
	MASTER_NAME:(ARG:0):10 = %TMP_NAME:24%
ENDIF
MASTER_NAMETYPE:(ARG:0) = LOCAL:20
REDRAW 0

$INPUT_LOOP2
INPUT

;登録
IF RESULT == 99
	SAVEGLOBAL
	RETURN

;戻る
ELSEIF RESULT == 95
	PRINTL 登録せずに戻ります。よろしいですか？
	CALL ASK_YN()
	IF RESULT == 0
		RETURN
	ELSE
		GOTO SHOW_LOOP1
	ENDIF

;情報表示
ELSEIF RESULT == 91
	ADDCHARA 0
	CALL APPLY_MASTER_DATA(CHARANUM - 1, ARG:0)
	SWAPCHARA MASTER, CHARANUM - 1

	;一時的にコンフィグの外見詳細表示をONにする
	LOCAL:0 = CONFIG:6
	CONFIG:6 = 1

	DRAWLINE
	CALL SHOW_INFO(MASTER)
	WAIT
	SWAPCHARA MASTER, CHARANUM - 1

	CONFIG:6 = 0

	;特例(通常は危険なのでDELCHARA禁止)
	DELCHARA CHARANUM - 1
	GOTO SHOW_LOOP1

;詳細設定
ELSEIF RESULT == 90
	CALL CREATE_MASTER_DETAIL(ARG:0)
	GOTO SHOW_LOOP1

ELSEIF RESULT >= 80 && RESULT <= 85
	LOCAL:0 = RESULT
	IF LOCAL:0 == 80
		PRINT 武闘
	ELSEIF LOCAL:0 == 81
		PRINT 知略
	ELSEIF LOCAL:0 == 82
		PRINT 政治
	ELSEIF LOCAL:0 == 83
		PRINT 妖術
	ELSEIF LOCAL:0 == 84
		PRINT 歌唱
	ELSEIF LOCAL:0 == 85
		PRINT 料理
	ENDIF
	PRINTL の値を入力して下さい(0～120)
	INPUT
	IF LOCAL:0 == 80
		MASTER_ABL:(ARG:0):50 = LIMIT(RESULT, 0, 120)
	ELSEIF LOCAL:0 == 81
		MASTER_ABL:(ARG:0):51 = LIMIT(RESULT, 0, 120)
	ELSEIF LOCAL:0 == 82
		MASTER_ABL:(ARG:0):52 = LIMIT(RESULT, 0, 120)
	ELSEIF LOCAL:0 == 83
		MASTER_ABL:(ARG:0):53 = LIMIT(RESULT, 0, 120)
	ELSEIF LOCAL:0 == 84
		MASTER_ABL:(ARG:0):60 = LIMIT(RESULT, 0, 120)
	ELSEIF LOCAL:0 == 85
		MASTER_ABL:(ARG:0):61 = LIMIT(RESULT, 0, 120)
	ENDIF
	GOTO SHOW_LOOP1
ELSE
	IF RESULT >= 10 && RESULT <= 19
		IF LOCAL:20 == 0 && RESULT == 10
			PRINTFORML 主人公の呼称を入力して下さい
			INPUTS
			IF RESULTS != ""
				TMP_NAME:0 = %RESULTS%
			ENDIF
			GOTO SHOW_LOOP1
		ELSEIF LOCAL:20 == 0 && RESULT == 12
			PRINTFORML 主人公の愛称を入力して下さい
			INPUTS
			IF RESULTS != ""
				TMP_NAME:1 = %RESULTS%
			ENDIF
			GOTO SHOW_LOOP1
		ELSEIF LOCAL:20 == 1 && RESULT == 12
			PRINTFORML 主人公の姓を入力して下さい
			INPUTS
			IF RESULTS != ""
				TMP_NAME:11 = %RESULTS%
				PRINTFORML (必要な場合は)読みをカタカナで入力して下さい
				INPUTS
				IF RESULTS != ""
					TMP_NAME:15 = %RESULTS%
				ENDIF
			ENDIF
			GOTO SHOW_LOOP1
		ELSEIF LOCAL:20 == 1 && RESULT == 14
			PRINTFORML 主人公の名を入力して下さい
			INPUTS
			IF RESULTS != ""
				TMP_NAME:12 = %RESULTS%
				PRINTFORML (必要な場合は)読みをカタカナで入力して下さい
				INPUTS
				IF RESULTS != ""
					TMP_NAME:16 = %RESULTS%
				ENDIF
			ENDIF
			GOTO SHOW_LOOP1
		ELSEIF LOCAL:20 == 1 && RESULT == 16
			PRINTFORML 主人公の字を入力して下さい
			INPUTS
			IF RESULTS != ""
				TMP_NAME:13 = %RESULTS%
				PRINTFORML (必要な場合は)読みをカタカナで入力して下さい
				INPUTS
				IF RESULTS != ""
					TMP_NAME:17 = %RESULTS%
				ENDIF
			ENDIF
			GOTO SHOW_LOOP1
		ELSEIF LOCAL:20 == 1 && RESULT == 18
			PRINTFORML 主人公の愛称を入力して下さい
			INPUTS
			IF RESULTS != ""
				TMP_NAME:18 = %RESULTS%
			ENDIF
			GOTO SHOW_LOOP1
		ELSEIF LOCAL:20 == 2 && RESULT == 10
			PRINTFORML 主人公の姓を入力して下さい
			INPUTS
			IF RESULTS != ""
				TMP_NAME:20 = %RESULTS%
				PRINTFORML (必要な場合は)読みをカタカナで入力して下さい
				INPUTS
				IF RESULTS != ""
					TMP_NAME:22 = %RESULTS%
				ENDIF
			ENDIF
			GOTO SHOW_LOOP1
		ELSEIF LOCAL:20 == 2 && RESULT == 12
			PRINTFORML 主人公の名を入力して下さい
			INPUTS
			IF RESULTS != ""
				TMP_NAME:21 = %RESULTS%
				PRINTFORML (必要な場合は)読みをカタカナで入力して下さい
				INPUTS
				IF RESULTS != ""
					TMP_NAME:23 = %RESULTS%
				ENDIF
			ENDIF
			GOTO SHOW_LOOP1
		ELSEIF LOCAL:20 == 2 && RESULT == 13
			PRINTFORML 主人公の愛称を入力して下さい
			INPUTS
			IF RESULTS != ""
				TMP_NAME:24 = %RESULTS%
			ENDIF
			GOTO SHOW_LOOP1
		ENDIF
	ENDIF

	CLEARLINE LINECOUNT - FIRST_LINE
	IF RESULT >= 0 && RESULT <= 3
		LOCAL:20 = RESULT
	ELSEIF LOCAL:20 == 0 && RESULT == 11
		IF GROUPMATCH(MASTER_TALENT:(ARG:0):0, 0, 3, 4, 5)
			CALL GENERATE_FIRST_NAME_KM
		ELSE
			CALL GENERATE_FIRST_NAME_KF
		ENDIF
		TMP_NAME:0 = %RESULTS:0%
	ELSEIF LOCAL:20 == 1 && RESULT == 11
		IF GROUPMATCH(MASTER_TALENT:(ARG:0):0, 0, 3, 4, 5)
			CALL GENERATE_TRUE_NAME_M
		ELSE
			CALL GENERATE_TRUE_NAME_F
		ENDIF
		TMP_NAME:10 = %RESULTS:0%
		TMP_NAME:14 = %RESULTS:1%
	ELSEIF LOCAL:20 == 1 && RESULT == 13
		CALL GENERATE_FAMILY_NAME
		TMP_NAME:11 = %RESULTS:0%
		TMP_NAME:15 = %RESULTS:1%
	ELSEIF LOCAL:20 == 1 && RESULT == 15
		CALL GENERATE_FIRST_NAME
		TMP_NAME:12 = %RESULTS:0%
		TMP_NAME:16 = %RESULTS:1%
	ELSEIF LOCAL:20 == 1 && RESULT == 17
		CALL GENERATE_MIDDLE_NAME
		TMP_NAME:13 = %RESULTS:0%
		TMP_NAME:17 = %RESULTS:1%
	ELSEIF RESULT >= 20 && RESULT <= 25
		MASTER_TALENT:(ARG:0):0 = RESULT - 20
	ELSEIF RESULT >= 30 && RESULT <= 31
		MASTER_TALENT:(ARG:0):3 = 31 - RESULT
	ELSEIF RESULT >= 40 && RESULT <= 41
		MASTER_TALENT:(ARG:0):2 = 41 - RESULT
	ELSEIF RESULT >= 50 && RESULT <= 51
		MASTER_TALENT:(ARG:0):1 = 51 - RESULT
	ELSEIF RESULT >= 60 && RESULT <= 64
		MASTER_TALENT:(ARG:0):140 = 0
		MASTER_TALENT:(ARG:0):141 = 0
		MASTER_TALENT:(ARG:0):142 = 0
		MASTER_TALENT:(ARG:0):143 = 0
		SELECTCASE RESULT - 60
			CASE 0
				MASTER_TALENT:(ARG:0):140 = 1
			CASE 1
				MASTER_TALENT:(ARG:0):141 = 1
			CASE 3
				MASTER_TALENT:(ARG:0):142 = 1
			CASE 4
				MASTER_TALENT:(ARG:0):143 = 1
		ENDSELECT
	ELSEIF RESULT >= 70 && RESULT <= 71
		MASTER_TALENT:(ARG:0):200 = 71 - RESULT
	ELSEIF RESULT >= 100 && RESULT <= 103
		IF LOCAL:20 == 0 && RESULT == 100
			TMP_NAME:0 = 
		ELSEIF LOCAL:20 == 0 && RESULT == 101
			TMP_NAME:1 = 
		ELSEIF LOCAL:20 == 1 && RESULT == 100
			TMP_NAME:10 = 
			TMP_NAME:14 = 
		ELSEIF LOCAL:20 == 1 && RESULT == 101
			TMP_NAME:11 = 
			TMP_NAME:15 = 
		ELSEIF LOCAL:20 == 1 && RESULT == 102
			TMP_NAME:12 = 
			TMP_NAME:16 = 
		ELSEIF LOCAL:20 == 1 && RESULT == 103
			TMP_NAME:13 = 
			TMP_NAME:17 = 
		ELSEIF LOCAL:20 == 1 && RESULT == 104
			TMP_NAME:18 = 
		ELSEIF LOCAL:20 == 2 && RESULT == 100
			TMP_NAME:20 = 
			TMP_NAME:22 = 
		ELSEIF LOCAL:20 == 2 && RESULT == 101
			TMP_NAME:21 = 
			TMP_NAME:23 = 
		ELSEIF LOCAL:20 == 2 && RESULT == 102
			TMP_NAME:24 = 
		ENDIF
	ELSEIF RESULT >= 200 && RESULT < 300
		LOCAL:4 = (RESULT - 200) / 10
		LOCAL:5 = RESULT % 10
		IF LOCAL:4 >= 0 && LOCAL:4 <= 5
			IF LOCAL:4 < 4
				LOCAL:4 += 50
			ELSE
				LOCAL:4 += 56
			ENDIF
			SELECTCASE LOCAL:5
				CASE 0
					MASTER_ABL:(ARG:0):(LOCAL:4) += 1
				CASE 1
					MASTER_ABL:(ARG:0):(LOCAL:4) -= 1
				CASE 2
					MASTER_ABL:(ARG:0):(LOCAL:4) += 10
				CASE 3
					MASTER_ABL:(ARG:0):(LOCAL:4) -= 10
			ENDSELECT
			MASTER_ABL:(ARG:0):(LOCAL:4) = LIMIT(MASTER_ABL:(ARG:0):(LOCAL:4), 0, 120)
		ENDIF
	ENDIF
ENDIF
GOTO SHOW_LOOP2

;-------------------------------------------------
;主人公の詳細設定
;-------------------------------------------------
@CREATE_MASTER_DETAIL(ARG:0)
;表示するABLの並び順リスト(10ごとに改行)
#DIM SHOW_ABL_LIST, 100
#DIM FIRST_LINE
;髪のHSVカラー
#DIM HAIR_HSV, 3

;TALENTNAMEの一時保存用
#DIMS TN
#DIMS STN
#DIM PAGE = 1, 1
#DIM MAX_PAGE = 0, 0

VARSET SHOW_ABL_LIST, -1

SHOW_ABL_LIST:0 = 0
SHOW_ABL_LIST:1 = 1
SHOW_ABL_LIST:2 = 2
SHOW_ABL_LIST:3 = 3
SHOW_ABL_LIST:4 = 4

SHOW_ABL_LIST:10 = 12
SHOW_ABL_LIST:11 = 13
SHOW_ABL_LIST:12 = 20
SHOW_ABL_LIST:13 = 21
SHOW_ABL_LIST:14 = 22
SHOW_ABL_LIST:20 = 23
SHOW_ABL_LIST:21 = 24
SHOW_ABL_LIST:22 = 25
SHOW_ABL_LIST:23 = 26
SHOW_ABL_LIST:24 = 27
SHOW_ABL_LIST:30 = 28
SHOW_ABL_LIST:31 = 29
SHOW_ABL_LIST:32 = 30
SHOW_ABL_LIST:33 = 31
SHOW_ABL_LIST:34 = 32

IF MASTER_TALENT:(ARG:0):302 != 0
	HAIR_HSV:0 = RGB_TO_H(MASTER_TALENT:(ARG:0):302)
	HAIR_HSV:1 = RGB_TO_S(MASTER_TALENT:(ARG:0):302)
	HAIR_HSV:2 = RGB_TO_V(MASTER_TALENT:(ARG:0):302)
ELSE
	VARSET HAIR_HSV, 0
ENDIF

$SHOW_LOOP1

DRAWLINE
PRINTL 主人公の詳細設定
DRAWLINE
FIRST_LINE = LINECOUNT
$SHOW_LOOP2

IF HAIR_HSV:2 > 0
	MASTER_TALENT:(ARG:0):302 = HSV_TO_RGB(HAIR_HSV:0, HAIR_HSV:1, HAIR_HSV:2)
ENDIF

PRINT □ 能力 □
FOR LOCAL:0, 0, 3
	PRINTL 
	PRINTFORM %BASENAME:(LOCAL:0), 8%最大値:{MASTER_MAXBASE:(ARG:0):(LOCAL:0), 4} -- 
	PRINTBUTTON "[+100]", LOCAL:0 + 2000
	PRINTBUTTON "[-100]", LOCAL:0 + 2100
	PRINT  
	PRINTBUTTON @"{LOCAL:0 + 700}[入力]", LOCAL:0 + 700
NEXT
LOCAL:3 = 0
FOR LOCAL:0, 0, 100
	LOCAL:2 = SHOW_ABL_LIST:(LOCAL:0)
	IF LOCAL:2 >= 0
		IF LOCAL:0 % 10 == 0 || LOCAL:3 == 5
			LOCAL:3 = 0
			PRINTL 
			PRINT     
		ELSE
			PRINT  
		ENDIF
		PRINTFORM %ABLNAME:(LOCAL:2), 6, RIGHT%:{MASTER_ABL:(ARG:0):(LOCAL:2), 2}
		PRINTBUTTON "[+]", LOCAL:0 + 1000
		PRINTBUTTON "[-]", LOCAL:0 + 1100
		LOCAL:3 ++
	ENDIF
NEXT
PRINTL 
PRINTFORM     陰毛:%GET_INMOU_NAME(MASTER_TALENT:(ARG:0):332), 12, LEFT%
PRINTBUTTON "[変更]", 332

PRINTL
PRINTFORM 膣締まり:%TOSTR_TIGHTNESS(MASTER_TALENT:(ARG:0):GETNUM(TALENT, "Ｖ締まり")), 12, LEFT%
PRINTBUTTON "[変更]", 333

PRINTL
PRINTFORM Ａ締まり:%TOSTR_TIGHTNESS(MASTER_TALENT:(ARG:0):GETNUM(TALENT, "Ａ締まり")), 12, LEFT%
PRINTBUTTON "[変更]", 334


PRINTL
DRAWLINE

PRINT □ 素質 □
LOCAL:3 = 0
LOCAL:4 = 0
FOR LOCAL:0, 1, 300
	TN = %TALENTNAME:(LOCAL:0)%
	IF TN != ""
		;非表示素質のスキップ
		IF GROUPMATCH(TN, "絶壁", "貧乳", "巨乳", "爆乳")
			CONTINUE
		ELSEIF 150 <= LOCAL:0 && LOCAL:0 <= 200
			CONTINUE
		ELSEIF 280 <= LOCAL:0
			CONTINUE
		ENDIF

		IF LOCAL:3 >= (PAGE - 1) * 44 && LOCAL:3 < PAGE * 44
			;改行判定
			IF LOCAL:3 % 4 == 0
				PRINTL 
				PRINT   
				LOCAL:4 ++
			ENDIF
			IF MASTER_TALENT:(ARG:0):(LOCAL:0)
				SETCOLOR COLOR("選択中")
			ENDIF
			PRINTBUTTON @"{LOCAL:0, 3}\{%TN, 14%\}", LOCAL:0
			RESETCOLOR
			PRINT    
		ENDIF
		LOCAL:3 ++
	ENDIF
NEXT
FOR LOCAL:0, 0, 11 - LOCAL:4
	PRINTL 
NEXT
;最大ページ数が設定されていない場合、ここで初めて設定
IF MAX_PAGE <= 0
	MAX_PAGE = (LOCAL:3 - 1) / 44 + 1
ENDIF

PRINTL 
PRINT   
PRINTBUTTON "901[前のページ]", 901
PRINT   
PRINTBUTTON "902[次のページ]", 902
PRINTL 
DRAWLINE
PRINT □ ＳＬＧ素質 □
LOCAL:3 = 0
LOCAL:4 = 0
FOR LOCAL:0, 1, 63
	STN = %TOSTR_SLG_TALENT(LOCAL:0)%
	IF STN != ""
		IF LOCAL:3 >= (PAGE:1 - 1) * 44 && LOCAL:3 < PAGE:1 * 44
			;改行判定
			IF LOCAL:3 % 4 == 0
				PRINTL 
				PRINT   
				LOCAL:4 ++
			ENDIF
			IF GETBIT(MASTER_TALENT:(ARG:0):360, LOCAL:0)
				SETCOLOR COLOR("選択中")
			ENDIF
			PRINTBUTTON @"{LOCAL:0 + 3000, 3}\{%STN, 14%\}", LOCAL:0 + 3000
			RESETCOLOR
			PRINT    
		ENDIF
		LOCAL:3 ++
	ENDIF
NEXT
FOR LOCAL:0, 0, 8 - LOCAL:4
	PRINTL 
NEXT
;最大ページ数が設定されていない場合、ここで初めて設定
IF MAX_PAGE:1 <= 0
	MAX_PAGE:1 = (LOCAL:3 - 1) / 32 + 1
ENDIF
PRINTL 
PRINT   
PRINTBUTTON "3901[前のページ]", 3901
PRINT   
PRINTBUTTON "3902[次のページ]", 3902
PRINTL 
DRAWLINE
LOCAL:0 = MASTER_TALENT:(ARG:0):300
LOCALS:0 = (%TOSTR_GROWTYPE_B(LOCAL:0)%に適性)
PRINTFORM    成長型:%TOSTR_GROWTYPE(LOCAL:0)%%LOCALS:0, 25, LEFT%
PRINTBUTTON "300[変更]", 300
PRINTL 
PRINTFORM      髪色:
CALL PRINT_HAIR_COLOR(MASTER_TALENT:(ARG:0):302)
PRINTFORM %TOSTR_SPACE(19)%
PRINTBUTTON "310[ランダム]", 310
IF MASTER_TALENT:(ARG:0):302 != 0
	PRINT  
	PRINTBUTTON "319[不明にする]", 319
ENDIF
PRINTL 
IF MASTER_TALENT:(ARG:0):302 != 0
	PRINT           
	PRINTBUTTON "311[色相+10]", 311
	PRINT  
	PRINTBUTTON "312[色相-10]", 312
	PRINT  
	PRINTBUTTON "313[彩度+5]", 313
	PRINT  
	PRINTBUTTON "314[彩度-5]", 314
	PRINT  
	PRINTBUTTON "315[明度+5]", 315
	PRINT  
	PRINTBUTTON "316[明度-5]", 316
	PRINT  
ENDIF
PRINTL 
LOCALS:0 = %TOSTR_HAIR_LENGTH(MASTER_TALENT:(ARG:0):303)%({MASTER_TALENT:(ARG:0):303})
PRINTFORM  髪の長さ:%LOCALS:0, 29, LEFT%
PRINTBUTTON "320[ランダム]", 320
PRINT  
PRINTBUTTON "321[直接入力]", 321
PRINTL 
PRINTL  ※髪色・髪の長さはコンフィグの「外見に関する詳細の表示」がONのときのみ表示
DRAWLINE

PRINTBUTTON "999[決定]", 999

REDRAW 0

$INPUT_LOOP
INPUT

IF RESULT == 999
	REDRAW 1
	RETURN
ELSEIF RESULT == 901
	PAGE --
	IF PAGE < 1
		PAGE = MAX_PAGE
	ENDIF
ELSEIF RESULT == 902
	PAGE ++
	IF PAGE > MAX_PAGE
		PAGE = 1
	ENDIF
ELSEIF RESULT == 3901
	PAGE:1 --
	IF PAGE:1 < 1
		PAGE:1 = MAX_PAGE:1
	ENDIF
ELSEIF RESULT == 3902
	PAGE:1 ++
	IF PAGE:1 > MAX_PAGE:1
		PAGE:1 = 1
	ENDIF
ELSEIF RESULT >= 700 && RESULT <= 702
	LOCAL:0 = RESULT - 700
	PRINTFORML %BASENAME:(LOCAL:0)%の最大値を入力して下さい(500～5000)
	INPUT
	IF RESULT != 0
		MASTER_MAXBASE:(ARG:0):(LOCAL:0) = LIMIT(RESULT, 500, 5000)
	ENDIF
	GOTO SHOW_LOOP1
ELSEIF INRANGE(RESULT, 1000, 1099) && SHOW_ABL_LIST:(RESULT - 1000) >= 0
	LOCAL:0 = SHOW_ABL_LIST:(RESULT - 1000)
	MASTER_ABL:(ARG:0):(LOCAL:0) = LIMIT(MASTER_ABL:(ARG:0):(LOCAL:0) + 1, 0, MAX(ABL_MAX:(LOCAL:0), 15))
ELSEIF INRANGE(RESULT, 1100, 1199) && SHOW_ABL_LIST:(RESULT - 1100) >= 0
	LOCAL:0 = SHOW_ABL_LIST:(RESULT - 1100)
	MASTER_ABL:(ARG:0):(LOCAL:0) = LIMIT(MASTER_ABL:(ARG:0):(LOCAL:0) - 1, 0, MAX(ABL_MAX:(LOCAL:0), 15))
ELSEIF INRANGE(RESULT, 2000, 2002)
	MASTER_MAXBASE:(ARG:0):(RESULT - 2000) = LIMIT(MASTER_MAXBASE:(ARG:0):(RESULT - 2000) + 100, 500, 5000)
ELSEIF INRANGE(RESULT, 2100, 2102)
	MASTER_MAXBASE:(ARG:0):(RESULT - 2100) = LIMIT(MASTER_MAXBASE:(ARG:0):(RESULT - 2100) - 100, 500, 5000)
ELSEIF RESULT == 300
	MASTER_TALENT:(ARG:0):300 ++
	IF MASTER_TALENT:(ARG:0):300 >= 10
		MASTER_TALENT:(ARG:0):300 = 0
	ENDIF
ELSEIF RESULT == 310
	HAIR_HSV:0 = RAND:360
	HAIR_HSV:1 = RAND:93
	HAIR_HSV:2 = RAND:68 + 30
ELSEIF RESULT == 319 && MASTER_TALENT:(ARG:0):302 != 0
	MASTER_TALENT:(ARG:0):302 = 0
	VARSET HAIR_HSV, 0
ELSEIF RESULT == 311 && MASTER_TALENT:(ARG:0):302 != 0
	HAIR_HSV:0 += 10
	IF HAIR_HSV:0 >= 360
		HAIR_HSV:0 -= 360
	ENDIF
ELSEIF RESULT == 312 && MASTER_TALENT:(ARG:0):302 != 0
	HAIR_HSV:0 -= 10
	IF HAIR_HSV:0 < 0
		HAIR_HSV:0 += 360
	ENDIF
ELSEIF RESULT == 313 && MASTER_TALENT:(ARG:0):302 != 0
	HAIR_HSV:1 = LIMIT(HAIR_HSV:1 + 5, 0, 95)
ELSEIF RESULT == 314 && MASTER_TALENT:(ARG:0):302 != 0
	HAIR_HSV:1 = LIMIT(HAIR_HSV:1 - 5, 0, 95)
ELSEIF RESULT == 315 && MASTER_TALENT:(ARG:0):302 != 0
	HAIR_HSV:2 = LIMIT(HAIR_HSV:2 + 5, 30, 100)
ELSEIF RESULT == 316 && MASTER_TALENT:(ARG:0):302 != 0
	HAIR_HSV:2 = LIMIT(HAIR_HSV:2 - 5, 30, 100)
ELSEIF RESULT == 320
	MASTER_TALENT:(ARG:0):303 = RAND:990 + 10
ELSEIF RESULT == 321
	DRAWLINE
	PRINTL 髪の長さを数値で入力して下さい
	PRINTL ------長さの表記------
	PRINTL   2～ 24 スキンヘッド
	PRINTL  25～174 超ショート
	PRINTL 175～274 ショート
	PRINTL 275～474 ミドル
	PRINTL 475～674 ロング
	PRINTL 675～999 超ロング
	INPUT
	MASTER_TALENT:(ARG:0):303 = LIMIT(RESULT, 2, 999)
ELSEIF RESULT == 332
	DRAWLINE
	PRINTL 陰毛について数値で入力して下さい
	PRINTL -1 パイパン（生えません。永久脱毛状態です）
	PRINTL 0  つるつる（剃ったorまだ生えていないパイパンです）
	PRINTL 1  うっすら
	PRINTL 2  柔毛
	PRINTL 3  ふんわり
	PRINTL 4  標準
	PRINTL 5  多め
	PRINTL 6  ふさふさ
	PRINTL 7  もっさり
	PRINTL 8  剛毛
	PRINTL 9  尻毛も生えるくらい
	PRINTL 10 ハート型に整える
	$INPUT_INMOU_LOOP
	INPUT
	IF -1 <= RESULT && RESULT <= 10
		MASTER_TALENT:(ARG:0):332 = RESULT
		MASTER_TALENT:(ARG:0):333 = RESULT
	ELSE
		GOTO INPUT_INMOU_LOOP
	ENDIF
ELSEIF RESULT == 333
	DRAWLINE
	PRINTL 膣の締まり具合について数値で入力して下さい
	PRINTL 0 崩壊
	PRINTL 1 がばがば
	PRINTL 2 ぽっかり
	PRINTL 3 ゆるゆる
	PRINTL 4 ゆるめ
	PRINTL 5 ふつう
	PRINTL 6 名器
	PRINTL 7 きゅっきゅっ
	PRINTL 8 きつきつ
	PRINTL 9 ぎちぎち
	$INPUT_LOOP_TIGHTNESS_V
	INPUT
	IF 0 <= RESULT && RESULT <= 9
		MASTER_TALENT:(ARG:0):GETNUM(TALENT, "Ｖ締まり") = RESULT * 100 + 50
	ELSE
		GOTO INPUT_LOOP_TIGHTNESS_V
	ENDIF
ELSEIF RESULT == 334
	DRAWLINE
	PRINTL 膣の締まり具合について数値で入力して下さい
	PRINTL 0 崩壊
	PRINTL 1 がばがば
	PRINTL 2 ぽっかり
	PRINTL 3 ゆるゆる
	PRINTL 4 ゆるめ
	PRINTL 5 ふつう
	PRINTL 6 名器
	PRINTL 7 きゅっきゅっ
	PRINTL 8 きつきつ
	PRINTL 9 ぎちぎち
	$INPUT_LOOP_TIGHTNESS_A
	INPUT
	IF 0 <= RESULT && RESULT <= 9
		MASTER_TALENT:(ARG:0):GETNUM(TALENT, "Ａ締まり") = RESULT * 100 + 50
	ELSE
		GOTO INPUT_LOOP_TIGHTNESS_A
	ENDIF
ELSEIF RESULT >= 1 && RESULT < 300 && TALENTNAME:RESULT != ""
	IF !GROUPMATCH(TALENTNAME:RESULT, "絶壁", "貧乳", "巨乳", "爆乳")
		IF (150 <= RESULT && RESULT <= 200) || 280 <= RESULT
		ELSE
			MASTER_TALENT:(ARG:0):RESULT = !MASTER_TALENT:(ARG:0):RESULT
		ENDIF
	ENDIF
ELSEIF RESULT >= 3000 && RESULT <= 3100 && TOSTR_SLG_TALENT(RESULT - 3000) != ""
	INVERTBIT MASTER_TALENT:(ARG:0):360, RESULT - 3000
ELSE
	CLEARLINE 1
	GOTO INPUT_LOOP
ENDIF
CLEARLINE LINECOUNT - FIRST_LINE
GOTO SHOW_LOOP2