@KOJO_DAILY_K86()

;豪族乱舞
CALL KOJO_DAILY_K86_GOUZOKU


;----------------------------------
;豪族乱舞
;----------------------------------
@KOJO_DAILY_K86_GOUZOKU
#DIM 神子
#DIM 布都
#DIM 屠自古
#DIM 青娥
#DIM 芳香
#DIM 助っ人

神子 = NAME_TO_CHARA("神子")
布都 = NAME_TO_CHARA("布都")
屠自古 = NAME_TO_CHARA("屠自古")
青娥 = NAME_TO_CHARA("青娥")
芳香 = NAME_TO_CHARA("芳香")

;一回で終わり
SIF KDVAR:神子:神子_豪族乱舞 == 1
	RETURN -1

;神子が自勢力所属で捕虜でなく死んでいないなら1.5%で発生
SIF !CHECK_KOJO_DAILY_HAPPEN(神子, 15, 1, 0, -1)
	RETURN -1


LOCAL:0 = 0
LOCAL:1 = 0
LOCAL:2 = 0
LOCAL:3 = 0

助っ人 = NAME_TO_CHARA("布都")
SIF (CFLAG:助っ人:所属 != CFLAG:MASTER:所属 && !CFLAG:助っ人:捕虜先 && CFLAG:助っ人:特殊状態フラグ != 2 && 助っ人 != GET_COUNTRY_BOSS(CFLAG:助っ人:所属))
	LOCAL:0 = 1
助っ人 = NAME_TO_CHARA("屠自古")
SIF (CFLAG:助っ人:所属 != CFLAG:MASTER:所属 && !CFLAG:助っ人:捕虜先 && CFLAG:助っ人:特殊状態フラグ != 2 && 助っ人 != GET_COUNTRY_BOSS(CFLAG:助っ人:所属))
	LOCAL:1 = 1
SELECTCASE RAND:100
	CASE IS < 10
		助っ人 = NAME_TO_CHARA("青娥")
		SIF (CFLAG:助っ人:所属 != CFLAG:MASTER:所属 && !CFLAG:助っ人:捕虜先 && CFLAG:助っ人:特殊状態フラグ != 2 && 助っ人 != GET_COUNTRY_BOSS(CFLAG:助っ人:所属))
			LOCAL:2 = 1
		助っ人 = NAME_TO_CHARA("芳香")
		SIF (CFLAG:助っ人:所属 != CFLAG:MASTER:所属 && !CFLAG:助っ人:捕虜先 && CFLAG:助っ人:特殊状態フラグ != 2 && 助っ人 != GET_COUNTRY_BOSS(CFLAG:助っ人:所属))
			LOCAL:3 = 1
	CASEELSE
		
ENDSELECT

;豪族が揃ってるならやらない
LOCAL:5 = 0
FOR LOCAL:4, 0, 2
	SIF LOCAL:(LOCAL:4) == 1
		LOCAL:5 += 1
NEXT
SIF LOCAL:5 < 1
	RETURN -1

IF LOCAL:0 == 1
	CFLAG:布都:所属 = 1
	CALL FORCE_FREE(布都)
ENDIF
IF LOCAL:1 == 1
	CFLAG:屠自古:所属 = 1
	CALL FORCE_FREE(屠自古)
ENDIF
IF LOCAL:2 == 1
	CFLAG:青娥:所属 = 1
	CALL FORCE_FREE(青娥)
ENDIF
IF LOCAL:3 == 1
	CFLAG:芳香:所属 = 1
	CALL FORCE_FREE(芳香)
ENDIF


CALL KOJO_DAILY_START
PRINTFORMW 「うむ。やはり皆が揃わないのは何かと不自然だな」
PRINTFORMW %ANAME(神子)%の独善的な判断により、知り合いが呼び寄せられました！
KDVAR:神子:神子_豪族乱舞 = 1