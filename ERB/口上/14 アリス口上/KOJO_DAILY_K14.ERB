@KOJO_DAILY_EXIST_K14()

@KOJO_DAILY_K14()
#DIM 発生フラグ
発生フラグ = 0

;人形裁判
CALL KOJO_DAILY_K14_NINGYOUSAIBAN
SIF RESULT != -1
	発生フラグ = 1
SIF DAILY_CANCEL
	RETURN 1
RETURN 発生フラグ
;----------------------------------
;人形裁判
;----------------------------------
@KOJO_DAILY_K14_NINGYOUSAIBAN
#DIM アリス
#DIM 上海人形
#DIM 蓬莱人形
#DIM 大江戸人形
#DIM ゴリアテ人形
#DIM 助っ人

アリス = NAME_TO_CHARA("アリス")
上海人形 = NAME_TO_CHARA("上海人形")
蓬莱人形 = NAME_TO_CHARA("蓬莱人形")
大江戸人形 = NAME_TO_CHARA("大江戸人形")
ゴリアテ人形 = NAME_TO_CHARA("ゴリアテ人形")


;アリスが捕虜でなく死んでいないなら1.5%で発生
SIF !CHECK_KOJO_DAILY_HAPPEN(アリス, 15, -1, 0, -1)
	RETURN -1

;加入させる人形のセレクト
SELECTCASE RAND:4
	CASE 0
		助っ人 = NAME_TO_CHARA("上海人形")
	CASE 1
		助っ人 = NAME_TO_CHARA("蓬莱人形")
	CASE 2
		助っ人 = NAME_TO_CHARA("大江戸人形")
	CASEELSE
		助っ人 = NAME_TO_CHARA("ゴリアテ人形")
ENDSELECT

;選択された人形がアリスと同勢力である、捕虜である、君主である、死んでいる場合は戻す
SIF CFLAG:助っ人:所属 == CFLAG:アリス:所属 || !CFLAG:助っ人:捕虜先 || 助っ人 == GET_COUNTRY_BOSS(CFLAG:助っ人:所属) || CFLAG:助っ人:特殊状態フラグ == 2
	RETURN -1

;放浪している場合は解除
SIF CFLAG:助っ人:特殊状態フラグ == 1
	CFLAG:助っ人:特殊状態フラグ = 0
CFLAG:助っ人:所属 = CFLAG:アリス:所属
CALL FORCE_FREE(助っ人)


CALL KOJO_DAILY_START
PRINTFORMW 「人形を操ってこその人形使いよ」
CALL COLORPRINTFORM(@"%ANAME(アリス)%の能力により、%ANAME(助っ人)%が%ANAME(アリス)%のいる勢力に加入しました", COLOR("注意"), "L")