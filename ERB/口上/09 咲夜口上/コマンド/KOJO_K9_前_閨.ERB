;コマンド閨(0～299)実行前
@KOJO_K9_NIGHT_BEFORE
#DIM 咲夜
#DIMS 咲夜機嫌
咲夜 = NAME_TO_CHARA("咲夜")

;─────────────────────────────────────── 
;●コマンド口上を呼び出す
;─────────────────────────────────────── 
IF !IS_MTAR(MASTER) && !IS_MPLY(MASTER)
	;実行も対象も主人公ではないとき
	;CALL ～
ELSEIF IS_MPLY(咲夜)
	;土下座・おねだり（主導権に関わらず実行が受け）
	IF GROUPMATCH(SELECTCOM, 110, 111)
		CALL KOJO_K9_NIGHT_BEFORE_BOTTOM
	;100自慰 101顔面騎乗 102Ａ顔面騎乗 （主導権がなければ受け）
	ELSEIF GROUPMATCH(SELECTCOM, 100, 101, 102) && !IS_INITIATIVE(咲夜)
		CALL KOJO_K9_NIGHT_BEFORE_BOTTOM
	;主導権なし排泄者　130放尿する 131尿を掛ける 132口内放尿 150放屁　151顔騎放屁（主導権がなければ受け）
	ELSEIF GROUPMATCH(SELECTCOM, 130, 131, 132, 150, 151) && !IS_INITIATIVE(咲夜)
		CALL KOJO_K9_NIGHT_BEFORE_BOTTOM
	;それ以外は実行が攻め
	ELSE
		CALL KOJO_K9_NIGHT_BEFORE_TOP
	ENDIF
ELSEIF IS_MTAR(咲夜)
	;土下座・おねだり（主導権に関わらず対象が攻め）
	IF GROUPMATCH(SELECTCOM, 110, 111)
		CALL KOJO_K9_NIGHT_BEFORE_TOP
	;100自慰 101顔面騎乗 102Ａ顔面騎乗（主導権があれば攻め）
	ELSEIF GROUPMATCH(SELECTCOM, 100, 101, 102) && IS_INITIATIVE(咲夜)
		CALL KOJO_K9_NIGHT_BEFORE_TOP
	;主導権あり排泄指示者　130放尿する 131尿を掛ける 132口内放尿 150放屁　151顔騎放屁（主導権があれば攻め）
	ELSEIF GROUPMATCH(SELECTCOM, 130, 131, 132, 150, 151) && IS_INITIATIVE(咲夜)
		CALL KOJO_K9_NIGHT_BEFORE_TOP
	;それ以外は対象が受け
	ELSE
		CALL KOJO_K9_NIGHT_BEFORE_BOTTOM
	ENDIF
ENDIF

$END
RETURN 0

