;ペニバン装着

;-------------------------------------------------
;コマンド名称
;-------------------------------------------------
@COM_NAME50
IF TCVAR:(MPLY:0):61
	RESULTS:0 = %ANAME(MPLY:0)%のペニバンを外す
	RESULTS:1 = %ANAME(MPLY:0)%のペニバンを外す
	RESULTS:2 = %ANAME(MPLY:0)%のペニバンを外す
	RESULTS:3 = %ANAME(MPLY:0)%のペニバンを外す
	RESULTS:4 = %ANAME(MPLY:0)%のペニバンを外す
	RESULTS:5 = %ANAME(MPLY:0)%のペニバンを外す
ELSE
	RESULTS:0 = %ANAME(MPLY:0)%がペニバンを装着
	RESULTS:1 = %ANAME(MPLY:0)%がペニバンを装着
	RESULTS:2 = %ANAME(MPLY:0)%がペニバンを装着
	RESULTS:3 = %ANAME(MPLY:0)%がペニバンを装着
	RESULTS:4 = %ANAME(MPLY:0)%がペニバンを装着
	RESULTS:5 = %ANAME(MPLY:0)%がペニバンを装着
ENDIF

;-------------------------------------------------
;選択可否判定
;-------------------------------------------------
@COM_ABLE50
;共通部分
CALL COM_ABLE_COMMON(50)
SIF RESULT == 0
	RETURN 0
;プレイヤーは最大で1人まで
SIF MPLY_NUM <= 0 || MPLY_NUM > 1
	RETURN 0
;プレイヤーが行動不能なら不可
SIF !IS_PLAYABLE(MPLY:0)
	RETURN 0
;プレイヤーが拘束中なら不可
SIF IS_BIND(MPLY:0)
	RETURN 0
;プレイヤーに元から竿があるなら不可
SIF PENIS(MPLY:0)
	RETURN 0
;ペニスバンドが必要
SIF ITEM:ペニスバンド == 0 && ITEM:A_ペニスバンド == 0
	RETURN 0
;プレイヤーが性交中なら不可
SIF IS_INSERT_SINGLE(MPLY:0, "全")
	RETURN 0
;プレイヤーが貝合わせ中・双頭バイブ使用中なら不可
SIF IS_EQUIP(MPLY:0, 21, 22)
	RETURN 0
;プレイヤーが自慰・顔面騎乗中なら不可
SIF IS_EQUIP_PLAYER(MPLY:0, 100, 101, 102)
	RETURN 0
;プレイヤーがクンニ・指挿れ・Ａ愛撫・Ｖフィスト・Ａフィスト・電気按摩・触手挿入・触手Ａ挿入・触手クリ責めされているなら不可
SIF IS_EQUIP_TARGET(MPLY:0, 2, 3, 4, 87, 88, 103, 201, 202, 203)
	RETURN 0
RETURN 1

;-------------------------------------------------
;メイン処理
;-------------------------------------------------
@COM50
IF TCVAR:(MPLY:0):61
	PRINTFORMW %ANAME(MPLY:0)%はペニスバンドを外した…
ELSE
	PRINTFORMW %ANAME(MPLY:0)%はペニスバンドを装着した…
ENDIF

TCVAR:(MPLY:0):61 = !TCVAR:(MPLY:0):61

RETURN 0

;-------------------------------------------------
;地の文(前文)
;-------------------------------------------------
@COM_TEXT_BEFORE50
